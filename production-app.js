const _0x4830dc=_0x57d5;(function(_0x81b959,_0x2ecc01){const _0x244b23=_0x57d5,_0x11c2a0=_0x81b959();while(!![]){try{const _0x29ddd6=-parseInt(_0x244b23(0x147))/0x1*(-parseInt(_0x244b23(0x130))/0x2)+-parseInt(_0x244b23(0x14d))/0x3*(-parseInt(_0x244b23(0x1a9))/0x4)+parseInt(_0x244b23(0x1bd))/0x5*(parseInt(_0x244b23(0x1cd))/0x6)+-parseInt(_0x244b23(0x12d))/0x7+-parseInt(_0x244b23(0x185))/0x8*(parseInt(_0x244b23(0x1a8))/0x9)+-parseInt(_0x244b23(0x1f4))/0xa+-parseInt(_0x244b23(0x179))/0xb*(-parseInt(_0x244b23(0x142))/0xc);if(_0x29ddd6===_0x2ecc01)break;else _0x11c2a0['push'](_0x11c2a0['shift']());}catch(_0x5bfd82){_0x11c2a0['push'](_0x11c2a0['shift']());}}}(_0x636d,0x4dcab));import{initializeApp}from'https://www.gstatic.com/firebasejs/9.22.2/firebase-app.js';import{getAuth,onAuthStateChanged,signOut,deleteUser}from'https://www.gstatic.com/firebasejs/9.22.2/firebase-auth.js';import{getFirestore,collection,doc,setDoc,getDoc,getDocs,addDoc,updateDoc,deleteDoc,query,where,orderBy,serverTimestamp,onSnapshot,runTransaction}from'https://www.gstatic.com/firebasejs/9.22.2/firebase-firestore.js';const CLOUDINARY_CLOUD_NAME='desejdvif',CLOUDINARY_UPLOAD_PRESET=_0x4830dc(0x12a),SELL_FORM_KEY=_0x4830dc(0x129),LANDING_URL=_0x4830dc(0x154),firebaseConfig={'apiKey':_0x4830dc(0x141),'authDomain':_0x4830dc(0x1cc),'projectId':'tradedeck-82bbb','storageBucket':_0x4830dc(0x19e),'messagingSenderId':_0x4830dc(0x140),'appId':'1:755235931546:web:7e35364b0157cd7fc2a623','measurementId':'G-4RXR7V9NCW'},app=initializeApp(firebaseConfig),db=getFirestore(app),auth=getAuth(app),profilePic=document[_0x4830dc(0x1e3)](_0x4830dc(0x159)),dropdownMenu=document[_0x4830dc(0x1e3)](_0x4830dc(0x10d)),userEmail=document[_0x4830dc(0x1e3)](_0x4830dc(0x112)),authOverlay=document['getElementById'](_0x4830dc(0x105));let userGlobal=null;const tabs=document[_0x4830dc(0x1a6)]('aside\x20nav\x20a[data-tab]'),sections=document[_0x4830dc(0x1a6)](_0x4830dc(0x110)),startSellingBtn=document[_0x4830dc(0x1e3)](_0x4830dc(0x111)),sellLandingContent=document[_0x4830dc(0x1e3)](_0x4830dc(0x1eb)),productForm=document[_0x4830dc(0x1e3)](_0x4830dc(0x199)),formErrorSummary=document[_0x4830dc(0x1e3)](_0x4830dc(0x1be)),titleInput=document[_0x4830dc(0x1e3)](_0x4830dc(0x1d1)),descriptionInput=document[_0x4830dc(0x1e3)]('description'),priceInput=document[_0x4830dc(0x1e3)]('price'),paypalEmailContainer=document['getElementById'](_0x4830dc(0x13a)),paypalEmailInput=document[_0x4830dc(0x1e3)](_0x4830dc(0x1f5)),paypalEmailValidationMsg=document[_0x4830dc(0x1e3)]('paypalEmailValidationMsg'),productFileUrlInput=document[_0x4830dc(0x1e3)](_0x4830dc(0x191)),openPreviewImageWidgetBtn=document['getElementById'](_0x4830dc(0x15a)),previewImageUrlInput=document[_0x4830dc(0x1e3)](_0x4830dc(0x1bf)),previewImageStatus=document[_0x4830dc(0x1e3)](_0x4830dc(0x124)),previewImageContainer=document['getElementById'](_0x4830dc(0x171)),currentPreviewImage=document['getElementById'](_0x4830dc(0x1f8)),productUploadForm=document[_0x4830dc(0x1e3)](_0x4830dc(0x116)),submitProductBtn=document['getElementById'](_0x4830dc(0x146)),searchBar=document[_0x4830dc(0x1e3)]('searchBar'),productListContainer=document[_0x4830dc(0x1e3)](_0x4830dc(0x160)),noProductsMessage=document[_0x4830dc(0x1e3)](_0x4830dc(0x1c9)),myProductsContainer=document[_0x4830dc(0x1e3)](_0x4830dc(0x14a)),noMyProductsMessage=document['getElementById'](_0x4830dc(0x12f)),sellerBalance=document[_0x4830dc(0x1e3)](_0x4830dc(0x1e4)),productDetailsSection=document[_0x4830dc(0x1e3)](_0x4830dc(0x17d)),backToHomeBtn=document[_0x4830dc(0x1e3)](_0x4830dc(0x1e0)),detailProductImage=document[_0x4830dc(0x1e3)](_0x4830dc(0x133)),detailProductTitle=document[_0x4830dc(0x1e3)](_0x4830dc(0x1c5)),detailProductDescription=document['getElementById']('detailProductDescription'),detailProductPrice=document[_0x4830dc(0x1e3)]('detailProductPrice'),detailActionButton=document[_0x4830dc(0x1e3)](_0x4830dc(0x117)),productDetailsError=document['getElementById'](_0x4830dc(0x13c)),paypalButtonContainer=document[_0x4830dc(0x1e3)]('paypal-button-container'),editProductModal=document[_0x4830dc(0x1e3)](_0x4830dc(0x156)),editProductForm=document[_0x4830dc(0x1e3)](_0x4830dc(0x1c7)),editProductIdInput=document[_0x4830dc(0x1e3)]('editProductId'),editTitleInput=document[_0x4830dc(0x1e3)](_0x4830dc(0x1b5)),editDescriptionInput=document[_0x4830dc(0x1e3)](_0x4830dc(0x18b)),editPriceInput=document[_0x4830dc(0x1e3)](_0x4830dc(0x14f)),editFileUrlInput=document[_0x4830dc(0x1e3)](_0x4830dc(0x16a)),cancelEditBtn=document['getElementById']('cancelEditBtn');document[_0x4830dc(0x1a1)][_0x4830dc(0x122)][_0x4830dc(0x1fa)]=_0x4830dc(0x1ab),onAuthStateChanged(auth,_0x377457=>{const _0x555e87=_0x4830dc;document[_0x555e87(0x1a1)][_0x555e87(0x122)][_0x555e87(0x1fa)]='',!_0x377457?(authOverlay['style'][_0x555e87(0x173)]='flex',userGlobal=null):(authOverlay['style'][_0x555e87(0x173)]=_0x555e87(0x19a),userGlobal=_0x377457,showProfileUI(_0x377457));});function _0x636d(){const _0x14413c=['input','Valid\x20PayPal\x20email\x20is\x20required\x20for\x20paid\x20products.','editDescription','template_4gvs2zf','number','log','<li>','value','productFileUrlInput','Error\x20loading\x20products:','format','Failed\x20to\x20list\x20product.\x20Please\x20try\x20again.','\x22\x20class=\x22delist-product-btn\x20px-3\x20py-1\x20bg-red-600\x20text-white\x20rounded\x20hover:bg-red-700\x20transition\x20ml-2\x22>Delist</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20','currentUser','Payment\x20completed\x20by\x20','success','productForm','none','Preview\x20image\x20selection\x20cancelled\x20or\x20not\x20provided.','\x22\x20target=\x22_blank\x22\x20class=\x22w-full\x20block\x20bg-green-600\x20hover:bg-green-700\x20text-white\x20text-center\x20py-3\x20rounded-xl\x20mt-2\x20font-semibold\x20transition\x22>Download\x20Product</a>','length','tradedeck-82bbb.appspot.com','isArray','.delist-product-btn','body','...','match','photoURL','map','querySelectorAll','removeAttribute','106533OdtuPS','252kURDFL','src','hidden','createElement','interactive-card\x20border\x20border-transparent','No\x20products\x20found\x20for\x20your\x20search.\x20Try\x20different\x20keywords!','Error\x20removing\x20document:\x20','set','push','getItem','event','opacity-50','editTitle','tradedeck_product_previews','disabled','Product\x20description\x20is\x20required.','className','location','balances','https://via.placeholder.com/600x400?text=Product+Preview','6815gWeapE','formErrorSummary','previewImageUrl','name','Product\x20title\x20is\x20required.','jpg','Not\x20Provided','<ul>','detailProductTitle','auth/requires-recent-login','editProductForm','List\x20Product','noProductsMessage','default','info','tradedeck-82bbb.firebaseapp.com','1464npWlfn','You\x20must\x20be\x20signed\x20in\x20to\x20list\x20a\x20product.','(no\x20email)','Account\x20deleted.','title','local','required','image','gif','classList','click','Error\x20loading\x20product\x20details.\x20Please\x20try\x20again.','textContent','png','send','service_px8mdvo','original_filename','bg-green-600','data','backToHomeBtn','asset_selected','signOutBtn','getElementById','sellerBalance','Loading\x20products...','products','innerHTML','desc','data-product-id','submit','sellLandingContent','filter','getAttribute','</p>\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22mt-auto\x20flex\x20justify-between\x20items-center\x20pt-2\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22font-bold\x20text-blue-600\x22>','\x22\x20class=\x22px-3\x20py-1\x20bg-gray-600\x20text-white\x20rounded\x20hover:bg-gray-700\x20transition\x22>Download</a>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20data-product-id=\x22','Product\x20not\x20found.','aria-label','test','\x0a\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20','1370740oNzaCg','paypalEmail','abort','div','currentPreviewImage','error','visibility','Download\x20','onclick','authOverlay','stopPropagation','</li>','Payment\x20could\x20not\x20be\x20completed.\x20Please\x20try\x20again.','addEventListener','exists','\x0a\x20\x20\x20\x20\x20\x20<img\x20src=\x22','Product\x20preview\x20image\x20is\x20required.','dropdownMenu','Listing...','createUploadWidget','main\x20section','startSellingBtn','userEmail','order','Download','w-full\x20py-3\x20rounded-xl\x20font-semibold\x20transition','productUploadForm','detailActionButton','cursor-not-allowed','_blank','uid','DOMContentLoaded','forEach','payer','Error\x20loading\x20user\x27s\x20products:','hover:bg-green-700','text-white','$0.00','style','get','previewImageStatus','\x22\x20target=\x22_blank\x22\x20download=\x22','toggle','aria-current','<a\x20href=\x22','TradeDeckSellForm','TradeDeck\x20user\x20products','</ul>','#paypal-button-container','3999744CvMYqr','</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20','noMyProductsMessage','10832JsqCVU','Failed\x20to\x20update\x20product.','cloudinary','detailProductImage','sell','description','split','input-invalid','remove','Failed\x20to\x20delete\x20account:\x20','paypalEmailContainer','deleteAccountBtn','productDetailsError','preventDefault','text','add','755235931546','AIzaSyA0RFkuXJjh7X43R6wWdQKrXtdUwVJ-4js','12iMZsys','includes','some','Unknown','submitProductBtn','4NmtNeJ','paypal','fileUrl','myProducts','dashboard','</h3>\x0a\x20\x20\x20\x20\x20\x20<p\x20class=\x22text-gray-600\x20text-sm\x20flex-grow\x20mb-2\x20overflow-hidden\x20overflow-ellipsis\x20whitespace-nowrap\x22>','16983PLrIYr','price','editPrice','open','home','toLowerCase','docs','https://933-ship-it.github.io/TradeDeck.com/','undefined','editProductModal','join','removeItem','userProfilePic','openPreviewImageWidget','message','loading','Error\x20delisting\x20product.\x20Please\x20try\x20again.\x20(Check\x20Firestore\x20rules\x20if\x20it\x20fails)','create','render','productList','Failed\x20to\x20list\x20product.\x20Please\x20check\x20console\x20for\x20details.\x20(Check\x20Firestore\x20rules!)','contains','sellerId','toFixed','email','Free','https://drive.google.com/uc?export=download&id=','No\x20products\x20found\x20matching\x20your\x20search.','reset','editFileUrl','Are\x20you\x20sure\x20you\x20want\x20to\x20permanently\x20delist\x20this\x20product?\x20This\x20action\x20cannot\x20be\x20undone.','svg','balance','Sale\x20email\x20sent!','bg-blue-100','createdAt','previewImageContainer','target','display','FAILED\x20to\x20send\x20sale\x20email.','querySelector','setAttribute','https://via.placeholder.com/300x200?text=Product+Preview','setItem','5171133vEWMvt','given_name','https://ui-avatars.com/api/?name=','\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22mt-auto\x20flex\x20justify-end\x20items-center\x20pt-2\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<a\x20href=\x22','productDetails','trim','status','\x22\x20alt=\x22','close','No\x20products\x20listed\x20on\x20the\x20dashboard.','Error\x20loading\x20products.\x20Please\x20try\x20again.','Price\x20must\x20be\x20zero\x20or\x20a\x20positive\x20number.','104xRlFhp','stringify','allProducts','email_address'];_0x636d=function(){return _0x14413c;};return _0x636d();}function sendSaleEmail({buyerName:_0xfe0f4e,buyerEmail:_0xb2dc05,sellerPaypalEmail:_0x34f2f3,productTitle:_0x25edf5,amount:_0x58c59b}){const _0x331589=_0x4830dc;emailjs[_0x331589(0x1db)](_0x331589(0x1dc),_0x331589(0x18c),{'buyer_name':_0xfe0f4e,'buyer_email':_0xb2dc05,'seller_paypal_email':_0x34f2f3,'product_title':_0x25edf5,'amount':_0x58c59b})['then'](function(_0x51874c){const _0x15f3dd=_0x331589;console[_0x15f3dd(0x18e)](_0x15f3dd(0x16e),_0x51874c[_0x15f3dd(0x17f)],_0x51874c[_0x15f3dd(0x13e)]);},function(_0x31bb85){const _0x2c4718=_0x331589;console[_0x2c4718(0x1f9)](_0x2c4718(0x174),_0x31bb85);});}function showProfileUI(_0x3d5574){const _0x1288f3=_0x4830dc;if(!_0x3d5574)return;profilePic[_0x1288f3(0x1aa)]=_0x3d5574[_0x1288f3(0x1a4)]||_0x1288f3(0x17b)+encodeURIComponent(_0x3d5574[_0x1288f3(0x165)]||'U'),profilePic[_0x1288f3(0x1d6)]['remove']('hidden'),userEmail[_0x1288f3(0x1d9)]=_0x3d5574[_0x1288f3(0x165)]||_0x1288f3(0x1cf),profilePic['onclick']=function(_0x131fd9){const _0x47eacd=_0x1288f3;_0x131fd9[_0x47eacd(0x106)](),dropdownMenu[_0x47eacd(0x1d6)][_0x47eacd(0x126)](_0x47eacd(0x1ab));},document[_0x1288f3(0x109)]('click',_0x15fa2a=>{const _0x2194ec=_0x1288f3;!profilePic[_0x2194ec(0x162)](_0x15fa2a[_0x2194ec(0x172)])&&!dropdownMenu[_0x2194ec(0x162)](_0x15fa2a[_0x2194ec(0x172)])&&dropdownMenu[_0x2194ec(0x1d6)][_0x2194ec(0x13f)](_0x2194ec(0x1ab));}),document[_0x1288f3(0x1e3)](_0x1288f3(0x13b))[_0x1288f3(0x104)]=async()=>{const _0x2f5c69=_0x1288f3;if(confirm('Delete\x20your\x20account?\x20This\x20cannot\x20be\x20undone.'))try{await deleteUser(_0x3d5574),alert(_0x2f5c69(0x1d0)),window[_0x2f5c69(0x1ba)]['href']=LANDING_URL;}catch(_0x25384a){_0x25384a['code']===_0x2f5c69(0x1c6)?alert('Please\x20sign\x20out\x20and\x20sign\x20in\x20again,\x20then\x20try\x20deleting\x20your\x20account.'):alert(_0x2f5c69(0x139)+_0x25384a['message']);}},document[_0x1288f3(0x1e3)](_0x1288f3(0x1e2))[_0x1288f3(0x104)]=()=>{signOut(auth);};}function showTab(_0x30e2ab){const _0x418793=_0x4830dc;tabs[_0x418793(0x11c)](_0x4b26ee=>{const _0x271d82=_0x418793;_0x4b26ee[_0x271d82(0x1d6)][_0x271d82(0x138)](_0x271d82(0x16f)),_0x4b26ee['removeAttribute']('aria-current');});const _0x482741=document[_0x418793(0x175)]('a[data-tab=\x22'+_0x30e2ab+'\x22]');_0x482741&&(_0x482741['classList']['add']('bg-blue-100'),_0x482741[_0x418793(0x176)](_0x418793(0x127),'page')),sections[_0x418793(0x11c)](_0x54463e=>{const _0x314af4=_0x418793;if(_0x54463e['id']===_0x30e2ab)_0x54463e[_0x314af4(0x1d6)][_0x314af4(0x138)]('hidden');else _0x54463e[_0x314af4(0x1d6)]['add'](_0x314af4(0x1ab));});}tabs['forEach'](_0x47e6bc=>{const _0x3de70f=_0x4830dc;_0x47e6bc['addEventListener'](_0x3de70f(0x1d7),async _0x53e58d=>{const _0x26d354=_0x3de70f;_0x53e58d[_0x26d354(0x13d)]();const _0x5632fe=_0x47e6bc['getAttribute']('data-tab');showTab(_0x5632fe);_0x5632fe!==_0x26d354(0x134)&&!productForm[_0x26d354(0x1d6)][_0x26d354(0x162)](_0x26d354(0x1ab))&&toggleProductForm(![]);productDetailsSection['classList'][_0x26d354(0x13f)](_0x26d354(0x1ab));if(_0x5632fe===_0x26d354(0x151))await loadProducts(searchBar[_0x26d354(0x190)]['trim']()),searchBar[_0x26d354(0x190)]='';else _0x5632fe===_0x26d354(0x14b)&&await showDashboard();});}),backToHomeBtn[_0x4830dc(0x109)](_0x4830dc(0x1d7),()=>{const _0xc67d57=_0x4830dc;showTab(_0xc67d57(0x151)),loadProducts(searchBar[_0xc67d57(0x190)][_0xc67d57(0x17e)]());}),startSellingBtn[_0x4830dc(0x109)]('click',()=>{toggleProductForm(!![]);});function toggleProductForm(_0x367a86){const _0x22a3cb=_0x4830dc;_0x367a86?(sellLandingContent[_0x22a3cb(0x1d6)][_0x22a3cb(0x13f)](_0x22a3cb(0x1ab)),productForm[_0x22a3cb(0x1d6)][_0x22a3cb(0x138)](_0x22a3cb(0x1ab)),showTab('sell'),productUploadForm[_0x22a3cb(0x169)](),restoreSellForm(),enableSubmitButton()):(sellLandingContent[_0x22a3cb(0x1d6)][_0x22a3cb(0x138)](_0x22a3cb(0x1ab)),productForm['classList'][_0x22a3cb(0x13f)](_0x22a3cb(0x1ab)));}function saveSellForm(){const _0x3b621a=_0x4830dc,_0x1f22da={'title':titleInput['value'],'description':descriptionInput[_0x3b621a(0x190)],'price':priceInput[_0x3b621a(0x190)],'paypalEmail':paypalEmailInput[_0x3b621a(0x190)],'previewImageUrl':previewImageUrlInput[_0x3b621a(0x190)],'productFileUrl':productFileUrlInput[_0x3b621a(0x190)]};localStorage[_0x3b621a(0x178)](SELL_FORM_KEY,JSON[_0x3b621a(0x186)](_0x1f22da));}function restoreSellForm(){const _0x28ecde=_0x4830dc,_0x4a1867=JSON['parse'](localStorage[_0x28ecde(0x1b2)](SELL_FORM_KEY)||'{}');titleInput['value']=_0x4a1867[_0x28ecde(0x1d1)]||'',descriptionInput['value']=_0x4a1867[_0x28ecde(0x135)]||'',priceInput[_0x28ecde(0x190)]=_0x4a1867['price']||'',paypalEmailInput[_0x28ecde(0x190)]=_0x4a1867['paypalEmail']||'',previewImageUrlInput['value']=_0x4a1867[_0x28ecde(0x1bf)]||'',productFileUrlInput[_0x28ecde(0x190)]=_0x4a1867['productFileUrl']||'';_0x4a1867[_0x28ecde(0x1bf)]?(currentPreviewImage[_0x28ecde(0x1aa)]=_0x4a1867['previewImageUrl'],previewImageContainer[_0x28ecde(0x1d6)]['remove'](_0x28ecde(0x1ab))):(previewImageContainer[_0x28ecde(0x1d6)][_0x28ecde(0x13f)]('hidden'),currentPreviewImage[_0x28ecde(0x1aa)]='');const _0x2e7df1=parseFloat(_0x4a1867['price']);!isNaN(_0x2e7df1)&&_0x2e7df1>0x0?(paypalEmailContainer[_0x28ecde(0x1d6)][_0x28ecde(0x138)](_0x28ecde(0x1ab)),paypalEmailInput[_0x28ecde(0x176)](_0x28ecde(0x1d3),_0x28ecde(0x1d3))):(paypalEmailContainer[_0x28ecde(0x1d6)][_0x28ecde(0x13f)](_0x28ecde(0x1ab)),paypalEmailInput[_0x28ecde(0x1a7)](_0x28ecde(0x1d3)));}[titleInput,descriptionInput,priceInput,paypalEmailInput,previewImageUrlInput,productFileUrlInput][_0x4830dc(0x11c)](_0x251438=>{const _0x1b2dee=_0x4830dc;_0x251438[_0x1b2dee(0x109)](_0x1b2dee(0x189),saveSellForm);}),document[_0x4830dc(0x109)](_0x4830dc(0x11b),restoreSellForm);let isPreviewImageUploading=![];const previewImageWidget=window[_0x4830dc(0x132)][_0x4830dc(0x10f)]({'cloudName':CLOUDINARY_CLOUD_NAME,'uploadPreset':CLOUDINARY_UPLOAD_PRESET,'sources':[_0x4830dc(0x1d2)],'resourceType':_0x4830dc(0x1d4),'clientAllowedFormats':[_0x4830dc(0x1c2),'jpeg',_0x4830dc(0x1da),_0x4830dc(0x1d5),_0x4830dc(0x16c)],'maxFileSize':0xa*0x400*0x400,'multiple':![],'folder':_0x4830dc(0x1b6)},(_0x89a258,_0xf2fb47)=>{const _0x45a8f6=_0x4830dc;if(!_0x89a258&&_0xf2fb47&&_0xf2fb47[_0x45a8f6(0x1b3)]===_0x45a8f6(0x198))previewImageUrlInput[_0x45a8f6(0x190)]=_0xf2fb47[_0x45a8f6(0x1cb)]['secure_url'],setFileInputStatus(previewImageStatus,'Image\x20uploaded:\x20'+_0xf2fb47[_0x45a8f6(0x1cb)][_0x45a8f6(0x1dd)]+'.'+_0xf2fb47[_0x45a8f6(0x1cb)][_0x45a8f6(0x193)],'success'),openPreviewImageWidgetBtn[_0x45a8f6(0x1d6)][_0x45a8f6(0x138)]('input-invalid'),currentPreviewImage[_0x45a8f6(0x1aa)]=_0xf2fb47[_0x45a8f6(0x1cb)]['secure_url'],previewImageContainer[_0x45a8f6(0x1d6)]['remove'](_0x45a8f6(0x1ab)),isPreviewImageUploading=![],enableSubmitButton(),saveSellForm();else{if(_0x89a258)setFileInputStatus(previewImageStatus,'Image\x20upload\x20failed.\x20Please\x20try\x20again.',_0x45a8f6(0x1f9)),previewImageUrlInput['value']='',openPreviewImageWidgetBtn[_0x45a8f6(0x1d6)][_0x45a8f6(0x13f)](_0x45a8f6(0x137)),previewImageContainer[_0x45a8f6(0x1d6)][_0x45a8f6(0x13f)](_0x45a8f6(0x1ab)),currentPreviewImage['src']='',isPreviewImageUploading=![],enableSubmitButton();else{if(_0xf2fb47&&(_0xf2fb47[_0x45a8f6(0x1b3)]===_0x45a8f6(0x181)||_0xf2fb47['event']===_0x45a8f6(0x1f6)))previewImageUrlInput[_0x45a8f6(0x190)]===''&&(setFileInputStatus(previewImageStatus,_0x45a8f6(0x19b),_0x45a8f6(0x1f9)),openPreviewImageWidgetBtn[_0x45a8f6(0x1d6)]['add'](_0x45a8f6(0x137))),isPreviewImageUploading=![],enableSubmitButton();else _0xf2fb47&&_0xf2fb47[_0x45a8f6(0x1b3)]===_0x45a8f6(0x1e1)&&(setFileInputStatus(previewImageStatus,'Uploading\x20'+(_0xf2fb47['info'][_0x45a8f6(0x1dd)]||_0x45a8f6(0x1d4))+_0x45a8f6(0x1a2),_0x45a8f6(0x15c)),isPreviewImageUploading=!![],disableSubmitButton());}}});openPreviewImageWidgetBtn['addEventListener'](_0x4830dc(0x1d7),()=>{const _0xc228cb=_0x4830dc;previewImageWidget[_0xc228cb(0x150)]();});function setFileInputStatus(_0x3ae7a3,_0xcd4a7a,_0xef13c8=_0x4830dc(0x1ca)){const _0x4d5c3f=_0x4830dc;_0x3ae7a3[_0x4d5c3f(0x1d9)]=_0xcd4a7a,_0x3ae7a3['classList'][_0x4d5c3f(0x138)](_0x4d5c3f(0x198),_0x4d5c3f(0x1f9),_0x4d5c3f(0x15c));if(_0xef13c8===_0x4d5c3f(0x198))_0x3ae7a3[_0x4d5c3f(0x1d6)][_0x4d5c3f(0x13f)](_0x4d5c3f(0x198));else{if(_0xef13c8===_0x4d5c3f(0x1f9))_0x3ae7a3[_0x4d5c3f(0x1d6)][_0x4d5c3f(0x13f)](_0x4d5c3f(0x1f9));else{if(_0xef13c8===_0x4d5c3f(0x15c))_0x3ae7a3[_0x4d5c3f(0x1d6)][_0x4d5c3f(0x13f)]('loading');}}}function convertToGoogleDriveDirectDownload(_0x42cb12){const _0x594cfb=_0x4830dc;if(!_0x42cb12)return _0x42cb12;let _0x46476a=_0x42cb12;const _0xb3ef6b=/drive\.google\.com\/file\/d\/([a-zA-Z0-9_-]+)\/(view|edit|preview)/,_0x449a1f=_0x42cb12['match'](_0xb3ef6b);if(_0x449a1f&&_0x449a1f[0x1]){const _0x5925c4=_0x449a1f[0x1];_0x46476a='https://drive.google.com/uc?export=download&id='+_0x5925c4;}else{if(_0x42cb12[_0x594cfb(0x143)]('drive.google.com/open?id=')){const _0x57fd4e=_0x42cb12[_0x594cfb(0x1a3)](/id=([a-zA-Z0-9_-]+)/);if(_0x57fd4e&&_0x57fd4e[0x1]){const _0x165214=_0x57fd4e[0x1];_0x46476a=_0x594cfb(0x167)+_0x165214;}}}return _0x46476a;}function validateSellForm(){const _0x39221d=_0x4830dc;let _0x3d62b3=[];if(!titleInput[_0x39221d(0x190)]['trim']())_0x3d62b3[_0x39221d(0x1b1)](_0x39221d(0x1c1));if(!descriptionInput[_0x39221d(0x190)][_0x39221d(0x17e)]())_0x3d62b3['push'](_0x39221d(0x1b8));if(isNaN(parseFloat(priceInput['value']))||parseFloat(priceInput[_0x39221d(0x190)])<0x0)_0x3d62b3[_0x39221d(0x1b1)](_0x39221d(0x184));if(!productFileUrlInput['value'][_0x39221d(0x17e)]()||!/^https?:\/\/.+\..+/[_0x39221d(0x1f2)](productFileUrlInput[_0x39221d(0x190)][_0x39221d(0x17e)]()))_0x3d62b3['push']('Valid\x20download\x20link\x20is\x20required.');if(!previewImageUrlInput[_0x39221d(0x190)])_0x3d62b3[_0x39221d(0x1b1)](_0x39221d(0x10c));if(!paypalEmailContainer[_0x39221d(0x1d6)]['contains'](_0x39221d(0x1ab))){const _0x52996b=paypalEmailInput[_0x39221d(0x190)][_0x39221d(0x17e)]();if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/[_0x39221d(0x1f2)](_0x52996b))_0x3d62b3[_0x39221d(0x1b1)](_0x39221d(0x18a));}if(isPreviewImageUploading)_0x3d62b3[_0x39221d(0x1b1)]('Please\x20wait\x20for\x20the\x20image\x20upload\x20to\x20finish.');return _0x3d62b3;}function showFormErrors(_0x25176f){const _0x294245=_0x4830dc;if(!_0x25176f[_0x294245(0x19d)]){formErrorSummary[_0x294245(0x1d6)][_0x294245(0x13f)](_0x294245(0x1ab)),formErrorSummary[_0x294245(0x1e7)]='';return;}formErrorSummary['classList'][_0x294245(0x138)](_0x294245(0x1ab)),formErrorSummary['innerHTML']=_0x294245(0x1c4)+_0x25176f[_0x294245(0x1a5)](_0x411195=>_0x294245(0x18f)+_0x411195+_0x294245(0x107))['join']('')+_0x294245(0x12b);}function enableSubmitButton(){const _0xd39143=_0x4830dc,_0x5584ab=validateSellForm();showFormErrors(_0x5584ab),_0x5584ab['length']?(submitProductBtn[_0xd39143(0x1b7)]=!![],submitProductBtn[_0xd39143(0x1d6)][_0xd39143(0x13f)](_0xd39143(0x1b4),'cursor-not-allowed')):(submitProductBtn[_0xd39143(0x1b7)]=![],submitProductBtn[_0xd39143(0x1d6)][_0xd39143(0x138)](_0xd39143(0x1b4),_0xd39143(0x118)));}function disableSubmitButton(){const _0x2b791f=_0x4830dc;submitProductBtn['disabled']=!![],submitProductBtn[_0x2b791f(0x1d6)]['add'](_0x2b791f(0x1b4),_0x2b791f(0x118));}[titleInput,descriptionInput,priceInput,paypalEmailInput,previewImageUrlInput,productFileUrlInput][_0x4830dc(0x11c)](_0x4e0924=>{const _0x1cd977=_0x4830dc;_0x4e0924[_0x1cd977(0x109)](_0x1cd977(0x189),enableSubmitButton);}),priceInput[_0x4830dc(0x109)](_0x4830dc(0x189),()=>{const _0x2c3af7=_0x4830dc,_0x6030d0=parseFloat(priceInput[_0x2c3af7(0x190)]);isNaN(_0x6030d0)||_0x6030d0===0x0?(paypalEmailContainer[_0x2c3af7(0x1d6)]['add'](_0x2c3af7(0x1ab)),paypalEmailInput[_0x2c3af7(0x1a7)](_0x2c3af7(0x1d3)),paypalEmailInput[_0x2c3af7(0x190)]=''):(paypalEmailContainer[_0x2c3af7(0x1d6)][_0x2c3af7(0x138)](_0x2c3af7(0x1ab)),paypalEmailInput[_0x2c3af7(0x176)](_0x2c3af7(0x1d3),_0x2c3af7(0x1d3))),enableSubmitButton(),saveSellForm();}),productUploadForm[_0x4830dc(0x109)](_0x4830dc(0x1ea),async _0x4df19d=>{const _0x53997b=_0x4830dc;_0x4df19d[_0x53997b(0x13d)](),disableSubmitButton(),submitProductBtn[_0x53997b(0x1d9)]=_0x53997b(0x10e);const _0x312b7f=validateSellForm();showFormErrors(_0x312b7f);if(_0x312b7f['length']){submitProductBtn[_0x53997b(0x1d9)]=_0x53997b(0x1c8),enableSubmitButton();return;}try{if(!auth[_0x53997b(0x196)]){alert(_0x53997b(0x1ce)),window['location']['reload']();return;}const _0x34e08f=convertToGoogleDriveDirectDownload(productFileUrlInput[_0x53997b(0x190)][_0x53997b(0x17e)]()),_0x112c30={'title':titleInput[_0x53997b(0x190)][_0x53997b(0x17e)](),'description':descriptionInput['value'][_0x53997b(0x17e)](),'price':parseFloat(priceInput['value']),'fileUrl':_0x34e08f,'previewImageUrl':previewImageUrlInput[_0x53997b(0x190)],'createdAt':serverTimestamp(),'sellerId':auth[_0x53997b(0x196)]['uid'],'paypalEmail':paypalEmailInput[_0x53997b(0x190)][_0x53997b(0x17e)]()};await addDoc(collection(db,'products'),_0x112c30),alert('Product\x20listed\x20successfully!'),localStorage[_0x53997b(0x158)](SELL_FORM_KEY),toggleProductForm(![]),await loadProducts('');if(auth[_0x53997b(0x196)])await loadMyProducts(auth[_0x53997b(0x196)][_0x53997b(0x11a)]);}catch(_0xa55ca6){showFormErrors([_0x53997b(0x194)]),console[_0x53997b(0x1f9)]('Error\x20adding\x20document\x20to\x20Firestore:',_0xa55ca6),alert(_0x53997b(0x161));}finally{enableSubmitButton(),submitProductBtn[_0x53997b(0x1d9)]=_0x53997b(0x1c8);}});function _0x57d5(_0x4f2232,_0x38922c){const _0x636d34=_0x636d();return _0x57d5=function(_0x57d599,_0x3e9c01){_0x57d599=_0x57d599-0x104;let _0x306142=_0x636d34[_0x57d599];return _0x306142;},_0x57d5(_0x4f2232,_0x38922c);}async function loadProducts(_0x54d41a=''){const _0x1b79f5=_0x4830dc;productListContainer['innerHTML']='',noProductsMessage[_0x1b79f5(0x1d9)]=_0x1b79f5(0x1e5),noProductsMessage[_0x1b79f5(0x1d6)]['remove'](_0x1b79f5(0x1ab));try{const _0x1f088c=query(collection(db,_0x1b79f5(0x1e6)),orderBy(_0x1b79f5(0x170),_0x1b79f5(0x1e8))),_0x1a2168=await getDocs(_0x1f088c),_0x413e7e=_0x1a2168['docs'][_0x1b79f5(0x1a5)](_0xa2fa42=>({'id':_0xa2fa42['id'],..._0xa2fa42['data']()}));window[_0x1b79f5(0x187)]=_0x413e7e;const _0x3ac53a=_0x54d41a[_0x1b79f5(0x152)](),_0x4e8188=_0x413e7e['filter'](_0x2a110d=>(_0x2a110d[_0x1b79f5(0x1d1)]||'')[_0x1b79f5(0x152)]()[_0x1b79f5(0x143)](_0x3ac53a)||(_0x2a110d[_0x1b79f5(0x135)]||'')[_0x1b79f5(0x152)]()[_0x1b79f5(0x143)](_0x3ac53a));renderProducts(_0x4e8188,productListContainer,noProductsMessage,![]);}catch(_0xd84d37){console[_0x1b79f5(0x1f9)](_0x1b79f5(0x192),_0xd84d37),noProductsMessage['textContent']=_0x1b79f5(0x183),noProductsMessage[_0x1b79f5(0x1d6)][_0x1b79f5(0x138)]('hidden');}}searchBar['addEventListener'](_0x4830dc(0x189),()=>{const _0x29a1bc=_0x4830dc;if(!document[_0x29a1bc(0x1e3)](_0x29a1bc(0x151))[_0x29a1bc(0x1d6)]['contains'](_0x29a1bc(0x1ab))){const _0x5996ff=searchBar[_0x29a1bc(0x190)][_0x29a1bc(0x17e)]()[_0x29a1bc(0x152)]();if(!window[_0x29a1bc(0x187)])return;if(!_0x5996ff){renderProducts(window[_0x29a1bc(0x187)],productListContainer,noProductsMessage,![]);return;}const _0x5954c1=_0x5996ff[_0x29a1bc(0x136)](/\s+/)[_0x29a1bc(0x1ec)](Boolean),_0x3b9767=window[_0x29a1bc(0x187)]['filter'](_0x202ef8=>{const _0x4327a0=_0x29a1bc,_0x29484d=[_0x202ef8['title']||'',_0x202ef8['description']||''][_0x4327a0(0x157)]('\x20')['toLowerCase']();return _0x5954c1[_0x4327a0(0x144)](_0x11043d=>_0x29484d[_0x4327a0(0x143)](_0x11043d));});_0x3b9767[_0x29a1bc(0x19d)]>0x0?(renderProducts(_0x3b9767,productListContainer,noProductsMessage,![]),noProductsMessage[_0x29a1bc(0x1d6)][_0x29a1bc(0x13f)](_0x29a1bc(0x1ab))):(productListContainer[_0x29a1bc(0x1e7)]='',noProductsMessage[_0x29a1bc(0x1d9)]=_0x29a1bc(0x1ae),noProductsMessage[_0x29a1bc(0x1d6)][_0x29a1bc(0x138)]('hidden'));}});function renderProducts(_0x25372d,_0x486c16,_0x5968bc,_0x4b10c7=![]){const _0x4db294=_0x4830dc;_0x486c16[_0x4db294(0x1e7)]='',_0x5968bc['classList'][_0x4db294(0x13f)](_0x4db294(0x1ab));if(!Array[_0x4db294(0x19f)](_0x25372d)||_0x25372d[_0x4db294(0x19d)]===0x0){_0x5968bc['classList']['remove'](_0x4db294(0x1ab)),_0x5968bc['textContent']=_0x4b10c7?_0x4db294(0x182):_0x4db294(0x168);return;}_0x25372d[_0x4db294(0x11c)](_0x222de2=>{const _0x5084c6=_0x4db294,_0x164d28=document[_0x5084c6(0x1ac)](_0x5084c6(0x1f7));_0x164d28[_0x5084c6(0x1b9)]='bg-white\x20rounded-lg\x20shadow\x20p-4\x20flex\x20flex-col\x20product-card\x20'+(_0x4b10c7?'':_0x5084c6(0x1ad)),_0x164d28[_0x5084c6(0x176)]('data-product-id',_0x222de2['id']);const _0x4f9a4a=parseFloat(_0x222de2[_0x5084c6(0x14e)])===0x0?_0x5084c6(0x166):'$'+parseFloat(_0x222de2['price'])[_0x5084c6(0x164)](0x2);let _0x3e3748='';_0x4b10c7&&(_0x3e3748=_0x5084c6(0x17c)+_0x222de2[_0x5084c6(0x149)]+_0x5084c6(0x125)+(_0x222de2['title']||'')['replace'](/\s/g,'-')+_0x5084c6(0x1ef)+_0x222de2['id']+_0x5084c6(0x195));_0x164d28[_0x5084c6(0x1e7)]=_0x5084c6(0x10b)+(_0x222de2['previewImageUrl']||_0x5084c6(0x177))+_0x5084c6(0x180)+_0x222de2['title']+'\x20preview\x22\x20class=\x22rounded\x20mb-3\x20h-48\x20object-cover\x20w-full\x22/>\x0a\x20\x20\x20\x20\x20\x20<h3\x20class=\x22font-semibold\x20text-lg\x20mb-1\x22>'+_0x222de2[_0x5084c6(0x1d1)]+_0x5084c6(0x14c)+_0x222de2[_0x5084c6(0x135)]+_0x5084c6(0x1ee)+_0x4f9a4a+_0x5084c6(0x12e)+_0x3e3748+_0x5084c6(0x1f3),_0x486c16['appendChild'](_0x164d28);if(_0x4b10c7){const _0xe91126=_0x164d28[_0x5084c6(0x175)](_0x5084c6(0x1a0));_0xe91126&&_0xe91126['addEventListener'](_0x5084c6(0x1d7),_0x4cf600=>{const _0x42a065=_0x5084c6;_0x4cf600[_0x42a065(0x106)]();const _0x59643f=_0xe91126[_0x42a065(0x1ed)](_0x42a065(0x1e9));if(_0x59643f)deleteProduct(_0x59643f);});}else _0x164d28['addEventListener']('click',()=>{const _0x24577d=_0x5084c6,_0x5beb88=_0x164d28[_0x24577d(0x1ed)](_0x24577d(0x1e9));if(_0x5beb88)showProductDetails(_0x5beb88);});});}async function deleteProduct(_0x4bac60){const _0x22a877=_0x4830dc;if(!confirm(_0x22a877(0x16b)))return;try{await deleteDoc(doc(db,_0x22a877(0x1e6),_0x4bac60)),alert('Product\x20delisted\x20successfully!'),await loadProducts(''),await showDashboard();}catch(_0x59d05a){console['error'](_0x22a877(0x1af),_0x59d05a),alert(_0x22a877(0x15d));}}async function showProductDetails(_0x57b17d){const _0x20210d=_0x4830dc;showTab(_0x20210d(0x17d)),productDetailsError['classList'][_0x20210d(0x13f)](_0x20210d(0x1ab));try{const _0x1c2141=await getDoc(doc(db,_0x20210d(0x1e6),_0x57b17d));if(!_0x1c2141[_0x20210d(0x10a)]()){productDetailsError[_0x20210d(0x1d9)]=_0x20210d(0x1f0),productDetailsError[_0x20210d(0x1d6)][_0x20210d(0x138)](_0x20210d(0x1ab));return;}const _0x2a28af={'id':_0x1c2141['id'],..._0x1c2141['data']()};detailProductImage[_0x20210d(0x1aa)]=_0x2a28af[_0x20210d(0x1bf)]||_0x20210d(0x1bc),detailProductTitle['textContent']=_0x2a28af[_0x20210d(0x1d1)],detailProductDescription[_0x20210d(0x1d9)]=_0x2a28af[_0x20210d(0x135)];const _0x5ce0d0=parseFloat(_0x2a28af['price'])===0x0?_0x20210d(0x166):'$'+parseFloat(_0x2a28af[_0x20210d(0x14e)])[_0x20210d(0x164)](0x2);detailProductPrice[_0x20210d(0x1d9)]=_0x5ce0d0,detailActionButton[_0x20210d(0x1b9)]=_0x20210d(0x115),detailActionButton[_0x20210d(0x1b7)]=![],parseFloat(_0x2a28af[_0x20210d(0x14e)])>0x0?(detailActionButton[_0x20210d(0x122)]['display']='none',paypalButtonContainer[_0x20210d(0x1e7)]='',typeof window[_0x20210d(0x148)]!=='undefined'&&window[_0x20210d(0x148)]['Buttons']?window[_0x20210d(0x148)]['Buttons']({'createOrder':function(_0x512d25,_0xd72f0d){const _0x598bfc=_0x20210d;return _0xd72f0d[_0x598bfc(0x113)][_0x598bfc(0x15e)]({'purchase_units':[{'amount':{'value':_0x2a28af['price']['toString']()},'description':_0x2a28af[_0x598bfc(0x1d1)]}]});},'onApprove':async function(_0x3a51cd,_0x17aad9){return _0x17aad9['order']['capture']()['then'](async function(_0x3c90cf){const _0x371f01=_0x57d5;alert(_0x371f01(0x197)+_0x3c90cf['payer'][_0x371f01(0x1c0)][_0x371f01(0x17a)]+'!'),paypalButtonContainer[_0x371f01(0x1e7)]=_0x371f01(0x128)+_0x2a28af['fileUrl']+_0x371f01(0x19c),await handleProductPurchase(_0x2a28af),sendSaleEmail({'buyerName':_0x3c90cf['payer']&&_0x3c90cf[_0x371f01(0x11d)]['name']&&_0x3c90cf[_0x371f01(0x11d)][_0x371f01(0x1c0)][_0x371f01(0x17a)]?_0x3c90cf[_0x371f01(0x11d)][_0x371f01(0x1c0)]['given_name']:_0x371f01(0x145),'buyerEmail':_0x3c90cf[_0x371f01(0x11d)]&&_0x3c90cf['payer'][_0x371f01(0x188)]?_0x3c90cf[_0x371f01(0x11d)]['email_address']:_0x371f01(0x145),'sellerPaypalEmail':_0x2a28af[_0x371f01(0x1f5)]||_0x371f01(0x1c3),'productTitle':_0x2a28af[_0x371f01(0x1d1)]||_0x371f01(0x145),'amount':typeof _0x2a28af['price']!==_0x371f01(0x155)?_0x2a28af[_0x371f01(0x14e)]:_0x371f01(0x145)});});},'onError':function(_0x17cba1){const _0x4c277f=_0x20210d;alert(_0x4c277f(0x108)),console[_0x4c277f(0x1f9)](_0x17cba1);}})[_0x20210d(0x15f)](_0x20210d(0x12c)):paypalButtonContainer[_0x20210d(0x1e7)]='<p\x20class=\x22text-red-600\x22>PayPal\x20buttons\x20could\x20not\x20be\x20loaded.\x20Please\x20refresh.</p>'):(detailActionButton[_0x20210d(0x122)][_0x20210d(0x173)]='',paypalButtonContainer[_0x20210d(0x1e7)]='',detailActionButton[_0x20210d(0x1d9)]=_0x20210d(0x114),detailActionButton[_0x20210d(0x1d6)][_0x20210d(0x13f)](_0x20210d(0x1de),_0x20210d(0x11f),_0x20210d(0x120)),detailActionButton[_0x20210d(0x104)]=()=>{const _0x447821=_0x20210d;window[_0x447821(0x150)](_0x2a28af['fileUrl'],_0x447821(0x119));},detailActionButton[_0x20210d(0x176)](_0x20210d(0x1f1),_0x20210d(0x1fb)+_0x2a28af[_0x20210d(0x1d1)]));}catch(_0x2c1ee7){console[_0x20210d(0x1f9)]('Error\x20loading\x20product\x20details:',_0x2c1ee7),productDetailsError['textContent']=_0x20210d(0x1d8),productDetailsError['classList'][_0x20210d(0x138)](_0x20210d(0x1ab));}}async function updateSellerBalance(_0x1caf13){const _0x410c7a=_0x4830dc;try{const _0x573c62=await getDoc(doc(db,_0x410c7a(0x1bb),_0x1caf13));let _0x71af59=0x0;_0x573c62[_0x410c7a(0x10a)]()&&typeof _0x573c62[_0x410c7a(0x1df)]()[_0x410c7a(0x16d)]===_0x410c7a(0x18d)&&(_0x71af59=_0x573c62[_0x410c7a(0x1df)]()['balance']),sellerBalance[_0x410c7a(0x1d9)]='$'+_0x71af59[_0x410c7a(0x164)](0x2);}catch(_0x237692){sellerBalance[_0x410c7a(0x1d9)]=_0x410c7a(0x121);}}let balanceUnsub=null;function watchSellerBalance(_0x5b5da4){const _0x426695=_0x4830dc;if(balanceUnsub)balanceUnsub();balanceUnsub=onSnapshot(doc(db,_0x426695(0x1bb),_0x5b5da4),_0x380b7e=>{const _0x1a94e4=_0x426695;let _0x35abac=0x0;if(_0x380b7e[_0x1a94e4(0x10a)]()&&typeof _0x380b7e[_0x1a94e4(0x1df)]()[_0x1a94e4(0x16d)]===_0x1a94e4(0x18d))_0x35abac=_0x380b7e['data']()[_0x1a94e4(0x16d)];sellerBalance[_0x1a94e4(0x1d9)]='$'+_0x35abac[_0x1a94e4(0x164)](0x2);});}async function loadMyProducts(_0x538a36){const _0x2b1727=_0x4830dc;myProductsContainer[_0x2b1727(0x1e7)]='',noMyProductsMessage[_0x2b1727(0x1d6)][_0x2b1727(0x13f)](_0x2b1727(0x1ab));try{const _0x21698c=query(collection(db,_0x2b1727(0x1e6)),where(_0x2b1727(0x163),'==',_0x538a36)),_0x952b06=await getDocs(_0x21698c),_0x1adf1e=_0x952b06[_0x2b1727(0x153)][_0x2b1727(0x1a5)](_0x49e2ce=>({'id':_0x49e2ce['id'],..._0x49e2ce[_0x2b1727(0x1df)]()}));if(_0x1adf1e[_0x2b1727(0x19d)]===0x0){noMyProductsMessage['classList'][_0x2b1727(0x138)](_0x2b1727(0x1ab));return;}renderProducts(_0x1adf1e,myProductsContainer,noMyProductsMessage,!![]);}catch(_0x291435){console['error'](_0x2b1727(0x11e),_0x291435),myProductsContainer[_0x2b1727(0x1e7)]='<p\x20class=\x22text-center\x20text-red-600\x22>Error\x20loading\x20your\x20products.<br>'+_0x291435[_0x2b1727(0x15b)]+'</p>';}}function openEditProductModal(_0x43ed93){const _0x3c87c3=_0x4830dc;editProductIdInput[_0x3c87c3(0x190)]=_0x43ed93['id'],editTitleInput[_0x3c87c3(0x190)]=_0x43ed93['title'],editDescriptionInput[_0x3c87c3(0x190)]=_0x43ed93['description'],editPriceInput[_0x3c87c3(0x190)]=_0x43ed93[_0x3c87c3(0x14e)],editFileUrlInput[_0x3c87c3(0x190)]=_0x43ed93[_0x3c87c3(0x149)],editProductModal[_0x3c87c3(0x1d6)][_0x3c87c3(0x138)](_0x3c87c3(0x1ab));}function closeEditProductModal(){const _0x404159=_0x4830dc;editProductModal[_0x404159(0x1d6)][_0x404159(0x13f)](_0x404159(0x1ab));}editProductForm['onsubmit']=async function(_0x4bb92a){const _0x412f05=_0x4830dc;_0x4bb92a[_0x412f05(0x13d)]();const _0x520bb2=editProductIdInput[_0x412f05(0x190)],_0x2818f1={'title':editTitleInput[_0x412f05(0x190)][_0x412f05(0x17e)](),'description':editDescriptionInput['value']['trim'](),'price':parseFloat(editPriceInput[_0x412f05(0x190)]),'fileUrl':editFileUrlInput['value'][_0x412f05(0x17e)]()};try{await updateDoc(doc(db,'products',_0x520bb2),_0x2818f1),closeEditProductModal(),auth[_0x412f05(0x196)]&&await loadMyProducts(auth[_0x412f05(0x196)][_0x412f05(0x11a)]);}catch(_0x203d46){alert(_0x412f05(0x131));}},cancelEditBtn['onclick']=closeEditProductModal;async function showDashboard(){const _0x69b55=_0x4830dc;if(!auth['currentUser'])return;showTab(_0x69b55(0x14b)),await updateSellerBalance(auth[_0x69b55(0x196)][_0x69b55(0x11a)]),watchSellerBalance(auth[_0x69b55(0x196)][_0x69b55(0x11a)]),await loadMyProducts(auth[_0x69b55(0x196)]['uid']);}async function incrementSellerBalance(_0x1e9520,_0x37fea9){const _0x1c2f32=_0x4830dc,_0x516485=doc(db,_0x1c2f32(0x1bb),_0x1e9520);await runTransaction(db,async _0x387689=>{const _0x8f3201=_0x1c2f32,_0x349556=await _0x387689[_0x8f3201(0x123)](_0x516485);let _0x312037=_0x37fea9;_0x349556[_0x8f3201(0x10a)]()&&typeof _0x349556[_0x8f3201(0x1df)]()[_0x8f3201(0x16d)]===_0x8f3201(0x18d)&&(_0x312037+=_0x349556[_0x8f3201(0x1df)]()[_0x8f3201(0x16d)]),_0x387689[_0x8f3201(0x1b0)](_0x516485,{'balance':_0x312037},{'merge':!![]});});}async function handleProductPurchase(_0xf6343d){const _0x5359ef=_0x4830dc;if(!_0xf6343d||!_0xf6343d[_0x5359ef(0x163)]||!_0xf6343d[_0x5359ef(0x14e)])return;await incrementSellerBalance(_0xf6343d[_0x5359ef(0x163)],parseFloat(_0xf6343d[_0x5359ef(0x14e)]));}loadProducts(),showTab(_0x4830dc(0x151)),enableSubmitButton();
